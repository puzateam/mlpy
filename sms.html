<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบประกันคุณภาพและผลงานเด่น - ร.ร.ชุมชนบ้านแม่หละป่าป๋วย</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SweetAlert2 CDN (สำหรับการแจ้งเตือนสวยๆ) -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- Custom Stylesheet (ไฟล์ style.css หลัก) -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100">

    <!-- ส่วนหัวเว็บ (Header) -->
    <header>
        <!-- ส่วนที่ 1: โลโก้และชื่อโรงเรียน (พื้นหลังสีส้มไล่เฉด) -->
        <div class="bg-gradient-to-r from-red-600 to-yellow-500 p-4">
            <div class="container mx-auto flex flex-col items-center">
                <div class="flex flex-col items-center mb-2">
                    <img src="https://i.postimg.cc/d3PbrGqC/logo-School.png" alt="โลโก้โรงเรียน" class="w-[80px] h-auto mb-2">
                    <div class="text-center">
                        <h1 class="text-white text-2xl md:text-3xl font-bold">โรงเรียนชุมชนบ้านแม่หละป่าป๋วย</h1>
                    </div>
                </div>
            </div>
        </div>

        <!-- ส่วนที่ 2: เมนูนำทาง (พื้นหลังสีขาว) -->
        <nav class="bg-white shadow-md sticky top-0 z-40">
            <div class="container mx-auto">
                <ul class="flex flex-wrap justify-center space-x-1 sm:space-x-2 md:space-x-3 lg:space-x-4 items-center py-2" id="sms-main-nav-ul">
                    <li><a href="#" data-target="iqaSectionContent" class="sms-nav-link menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">ประกันคุณภาพภายใน</a></li>
                    <li><a href="#" data-target="highlightsSectionContent" class="sms-nav-link menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">ผลงานเด่น</a></li>
                    <li><a href="index.html" class="menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">กลับเว็บหลัก</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- ส่วนเนื้อหาหลักของหน้าเว็บ -->
    <div class="container mx-auto p-4 main-container flex flex-col md:flex-row gap-6">

        <!-- แถบด้านข้างซ้าย (Sidebar Left) - สำหรับมาตรฐานปฐมวัย -->
        <aside class="sidebar sidebar-sms w-full md:w-1/4">
            <div class="bg-white rounded-2xl shadow-md p-5 card">
                <h2 class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 my-4">มาตรฐานฯ ปฐมวัย</h2>
                <ul class="space-y-1" id="preschool-standards-menu">
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 1: คุณภาพของเด็ก</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.1" data-indicator-title="ปฐมวัย ม.1 ตชว.1.1: เด็กเจริญเติบโตสมวัย สุขภาพแข็งแรง และมีพัฒนาการด้านการเคลื่อนไหว">1.1 เด็กเจริญเติบโตสมวัยฯ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.2" data-indicator-title="ปฐมวัย ม.1 ตชว.1.2: เด็กมีพัฒนาการด้านสติปัญญา เรียนรู้และสร้างสรรค์">1.2 พัฒนาการด้านสติปัญญา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.3" data-indicator-title="ปฐมวัย ม.1 ตชว.1.3: เด็กมีพัฒนาการด้านภาษาและการสื่อสาร">1.3 พัฒนาการด้านภาษา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.4" data-indicator-title="ปฐมวัย ม.1 ตชว.1.4: เด็กมีพัฒนาการด้านอารมณ์และจิตใจ">1.4 พัฒนาการด้านอารมณ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.5" data-indicator-title="ปฐมวัย ม.1 ตชว.1.5: เด็กมีพัฒนาการด้านสังคมและคุณธรรม">1.5 พัฒนาการด้านสังคม</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 2: กระบวนการบริหารและการจัดการ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.1" data-indicator-title="ปฐมวัย ม.2 ตชว.2.1: วิสัยทัศน์ พันธกิจ และค่านิยมของสถานศึกษา">2.1 วิสัยทัศน์ พันธกิจ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.2" data-indicator-title="ปฐมวัย ม.2 ตชว.2.2: กลยุทธ์และเป้าหมายของสถานศึกษา">2.2 กลยุทธ์และเป้าหมาย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.3" data-indicator-title="ปฐมวัย ม.2 ตชว.2.3: ผู้บริหารมีภาวะผู้นำทางวิชาการและบริหารจัดการด้วยหลักธรรมาภิบาล">2.3 ผู้บริหารมีภาวะผู้นำ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.4" data-indicator-title="ปฐมวัย ม.2 ตชว.2.4: การพัฒนาวิชาชีพผู้บริหาร ครู และบุคลากรทางการศึกษา">2.4 พัฒนาวิชาชีพบุคลากร</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.5" data-indicator-title="ปฐมวัย ม.2 ตชว.2.5: การนิเทศและประเมินการปฏิบัติงานอย่างเป็นระบบ">2.5 นิเทศและประเมิน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.6" data-indicator-title="ปฐมวัย ม.2 ตชว.2.6: การใช้สื่อและเทคโนโลยีสารสนเทศที่เอื้อต่อการเรียนรู้">2.6 การใช้สื่อและเทคโนโลยี</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.7" data-indicator-title="ปฐมวัย ม.2 ตชว.2.7: การจัดสภาพแวดล้อมและแหล่งเรียนรู้ที่ปลอดภัย">2.7 สภาพแวดล้อมปลอดภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.8" data-indicator-title="ปฐมวัย ม.2 ตชว.2.8: สวัสดิการและแนวทางการป้องกันโรคและภัยพิบัติ">2.8 สวัสดิการป้องกันภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.9" data-indicator-title="ปฐมวัย ม.2 ตชว.2.9: กระบวนการเฝ้าระวังและคัดกรองเด็กที่ต้องการความช่วยเหลือ">2.9 เฝ้าระวังและคัดกรอง</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.10" data-indicator-title="ปฐมวัย ม.2 ตชว.2.10: การสร้างเครือข่ายและการมีส่วนร่วมของผู้ปกครองและชุมชน">2.10 เครือข่ายและการมีส่วนร่วม</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 3: การจัดประสบการณ์ฯ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.1" data-indicator-title="ปฐมวัย ม.3 ตชว.3.1: ครูมีการวางแผนการจัดประสบการณ์รายปี">3.1 ครูวางแผนการจัดประสบการณ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.2" data-indicator-title="ปฐมวัย ม.3 ตชว.3.2: ครูนำแผนการจัดประสบการณ์ไปใช้โดยใช้สื่อและแหล่งเรียนรู้ที่เอื้อต่อการเรียนรู้">3.2 ครูนำแผนไปใช้</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.3" data-indicator-title="ปฐมวัย ม.3 ตชว.3.3: มีการตรวจสอบและประเมินเด็กอย่างเป็นระบบ">3.3 ตรวจสอบและประเมินเด็ก</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.4" data-indicator-title="ปฐมวัย ม.3 ตชว.3.4: มีการนำผลการประเมินมาพัฒนาเด็ก">3.4 นำผลประเมินมาพัฒนา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.5" data-indicator-title="ปฐมวัย ม.3 ตชว.3.5: มีการแลกเปลี่ยนเรียนรู้และให้ข้อมูลป้อนกลับเพื่อพัฒนาการจัดประสบการณ์">3.5 แลกเปลี่ยนเรียนรู้</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- ส่วนเนื้อหาตรงกลาง (Main Content Area) -->
        <main class="content w-full md:w-2/4">
            <div class="bg-white rounded-2xl shadow-md p-5 card card-main-content-sms main-content-area-sms">
                <h2 id="sms-center-content-title" class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 mb-6">ประกันคุณภาพภายใน</h2>

                <div id="pdf-viewer-container" class="hidden">
                    <iframe id="pdf-iframe" class="pdf-embed-container-sms" frameborder="0" allowfullscreen></iframe>
                </div>

                <div id="iqaSectionContent" class="sms-html-content-section">
                    <div class="iqa-item">
                        <h3 class="text-lg font-semibold text-orange-700 mb-2">รายงานการประเมินตนเอง (SAR)</h3>
                        <p class="text-gray-700 mb-2">สถานศึกษามีการจัดทำรายงานการประเมินตนเองเป็นประจำทุกปี เพื่อสะท้อนผลการดำเนินงานและวางแผนพัฒนาคุณภาพอย่างต่อเนื่อง</p>
                        <ul class="list-disc ml-5 text-gray-700">
                            <li><a href="YOUR_SAR_PDF_LINK_HERE" target="_blank" class="text-blue-600 hover:underline evidence-button">SAR ปีการศึกษาปัจจุบัน <span class="file-type">PDF</span></a></li>
                        </ul>
                    </div>
                    <div class="iqa-item">
                        <h3 class="text-lg font-semibold text-orange-700 mb-2">แผนพัฒนาคุณภาพการศึกษา</h3>
                        <p class="text-gray-700 mb-2">แผนงานที่แสดงทิศทางการพัฒนาคุณภาพของสถานศึกษาในระยะต่างๆ สอดคล้องกับนโยบายและบริบทของสถานศึกษา</p>
                        <ul class="list-disc ml-5 text-gray-700">
                            <li><a href="YOUR_PLAN_PDF_LINK_HERE" target="_blank" class="text-blue-600 hover:underline evidence-button">แผนปฏิบัติการประจำปี <span class="file-type">PDF</span></a></li>
                        </ul>
                    </div>
                </div>

                <div id="highlightsSectionContent" class="sms-html-content-section hidden">
                    <h3 class="text-lg font-semibold text-orange-700 mb-2">ผลงานเด่นของสถานศึกษา</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="highlight-item bg-white p-4 rounded-lg shadow hover:shadow-xl transition-shadow">
                            <img src="https://via.placeholder.com/600x400.png?text=ผลงานเด่น+1" alt="ผลงานเด่น 1" class="w-full h-48 object-cover rounded-md mb-3">
                            <h4 class="text-md font-semibold text-gray-800">รางวัลชนะเลิศการแข่งขันโครงงานวิทยาศาสตร์ระดับภาค</h4>
                            <p class="text-gray-600 text-sm mb-3">นักเรียนของเราได้รับรางวัลชนะเลิศจากการแข่งขันโครงงานวิทยาศาสตร์ในหัวข้อ "พลังงานสะอาดเพื่ออนาคต" ซึ่งจัดขึ้นโดย...</p>
                            <a href="path/to/highlight_detail_1.html" target="_blank" class="btn-primary inline-block px-4 py-2 text-sm">อ่านเพิ่มเติม</a>
                        </div>
                        <div class="highlight-item bg-white p-4 rounded-lg shadow hover:shadow-xl transition-shadow">
                            <img src="https://via.placeholder.com/600x400.png?text=กิจกรรมเด่น+2" alt="กิจกรรมเด่น 2" class="w-full h-48 object-cover rounded-md mb-3">
                            <h4 class="text-md font-semibold text-gray-800">โครงการจิตอาสาพัฒนาชุมชน</h4>
                            <p class="text-gray-600 text-sm mb-3">นักเรียนและบุคลากรของโรงเรียนร่วมกันจัดกิจกรรมบำเพ็ญประโยชน์ ทำความสะอาด และปรับปรุงภูมิทัศน์ในชุมชนรอบโรงเรียน...</p>
                            <a href="path/to/highlight_detail_2.html" target="_blank" class="btn-primary inline-block px-4 py-2 text-sm">ดูภาพกิจกรรม</a>
                        </div>
                    </div>
                </div>
            </div> 
        </main>

        <!-- แถบด้านข้างขวา (Sidebar Right) - สำหรับมาตรฐานขั้นพื้นฐาน -->
        <aside class="sidebar sidebar-sms w-full md:w-1/4">
            <div class="bg-white rounded-2xl shadow-md p-5 card">
                <h2 class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 my-4">มาตรฐานฯ ขั้นพื้นฐาน</h2>
                <ul class="space-y-1" id="basiced-standards-menu">
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 1: คุณภาพของผู้เรียน</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.1" data-indicator-title="ขั้นพื้นฐาน ม.1 ตชว.1.1: ผู้เรียนมีสมรรถนะตามหลักสูตรสถานศึกษา">1.1 ผู้เรียนมีสมรรถนะ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.2" data-indicator-title="ขั้นพื้นฐาน ม.1 ตชว.1.2: ผู้เรียนมีคุณลักษณะที่พึงประสงค์ตามหลักสูตรสถานศึกษา">1.2 คุณลักษณะที่พึงประสงค์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.3" data-indicator-title="ขั้นพื้นฐาน ม.1 ตชว.1.3: ผู้เรียนสามารถนำตนเองในการเรียนรู้">1.3 นำตนเองในการเรียนรู้</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 2: กระบวนการบริหารและการจัดการ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.1" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.1: วิสัยทัศน์ พันธกิจ และค่านิยมของสถานศึกษา">2.1 วิสัยทัศน์ พันธกิจ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.2" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.2: นโยบาย ทิศทาง กลยุทธ์ และแผนงานสอดคล้องกับวิสัยทัศน์และพันธกิจ">2.2 นโยบาย ทิศทาง กลยุทธ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.3" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.3: ผู้บริหารมีภาวะผู้นำทางวิชาการและบริหารจัดการด้วยหลักธรรมาภิบาล">2.3 ผู้บริหารมีภาวะผู้นำ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.4" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.4: การพัฒนาครูและบุคลากรทางการศึกษา">2.4 พัฒนาครูและบุคลากร</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.5" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.5: กระบวนการนิเทศการปฏิบัติงานของครูและบุคลากรทางการศึกษา">2.5 นิเทศการปฏิบัติงาน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.6" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.6: การใช้สื่อ อุปกรณ์ และเทคโนโลยีเพื่อสนับสนุนการจัดการศึกษา">2.6 การใช้สื่อ อุปกรณ์ เทคโนโลยี</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.7" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.7: การจัดสภาพแวดล้อม อาคารสถานที่ที่ปลอดภัยและถูกสุขลักษณะ">2.7 สภาพแวดล้อมปลอดภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.8" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.8: สวัสดิการ สวัสดิภาพ และแนวทางการป้องกันโรคและภัยพิบัติ">2.8 สวัสดิการ สวัสดิภาพ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.9" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.9: ระบบและกระบวนการช่วยเหลือผู้เรียน">2.9 ระบบช่วยเหลือผู้เรียน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.10" data-indicator-title="ขั้นพื้นฐาน ม.2 ตชว.2.10: การเสริมสร้างเครือข่ายผู้ปกครอง องค์กร และชุมชน">2.10 เสริมสร้างเครือข่าย</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="block text-gray-700 sms-sidebar-main-link py-2">มาตรฐานที่ 3: กระบวนการจัดการเรียนการสอนฯ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.1" data-indicator-title="ขั้นพื้นฐาน ม.3 ตชว.3.1: การออกแบบหลักสูตรและแผนการจัดการเรียนรู้ที่เสริมสร้างสมรรถนะและคุณลักษณะที่พึงประสงค์">3.1 ออกแบบหลักสูตรและแผนฯ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.2" data-indicator-title="ขั้นพื้นฐาน ม.3 ตชว.3.2: การจัดกิจกรรมการเรียนรู้ที่เสริมสร้างสมรรถนะและคุณลักษณะที่พึงประสงค์">3.2 จัดกิจกรรมการเรียนรู้</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.3" data-indicator-title="ขั้นพื้นฐาน ม.3 ตชว.3.3: ครูวัดและประเมินผลการเรียนรู้ของผู้เรียนอย่างเป็นระบบและต่อเนื่อง">3.3 ครูวัดและประเมินผล</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </aside>
    </div> <!-- Close main-container -->

    <!-- ส่วนท้ายเว็บ (Footer) -->
    <footer class="bg-gradient-to-r from-red-600 to-yellow-500 text-white py-4 mt-8 rounded-t-3xl">
        <div class="container mx-auto px-4">
            <div class="flex flex-col items-center text-center">
                <p class="footer-text">โรงเรียนชุมชนบ้านแม่หละป่าป๋วย</p>
                <p class="footer-text">ตำบลสรอย อำเภอวังชิ้น จังหวัดแพร่</p>
                <p class="footer-text">สำนักงานเขตพื้นที่การศึกษาประถมศึกษาแพร่เขต 2</p>
            </div>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const smsHtmlContentSections = document.querySelectorAll('.sms-html-content-section');
    const pdfViewerContainer = document.getElementById('pdf-viewer-container');
    const pdfIframe = document.getElementById('pdf-iframe');
    const smsCenterContentTitle = document.getElementById('sms-center-content-title');
    const mainContentArea = document.querySelector('.main-content-area-sms'); // The div wrapping title, html sections, and pdf viewer

    const smsNavLinks = document.querySelectorAll('#sms-main-nav-ul a.sms-nav-link');
    const indicatorLinks = document.querySelectorAll('.sms-indicator-link');

    const initialHtmlContentId = 'iqaSectionContent'; // Default HTML content to show
    const initialTitle = document.querySelector(`#sms-main-nav-ul a[data-target="${initialHtmlContentId}"]`)?.textContent.trim() || 'ประกันคุณภาพภายใน';


    function clearAllActiveStates() {
        smsNavLinks.forEach(link => {
            link.classList.remove('active', 'text-red-500', 'font-semibold');
            link.classList.add('text-gray-700');
        });
        indicatorLinks.forEach(link => {
            link.classList.remove('active-indicator');
             // also remove active from parent main link if it was styled
            const parentMainLink = link.closest('.sidebar-item')?.querySelector('.sms-sidebar-main-link');
            if (parentMainLink) {
                parentMainLink.classList.remove('active'); // remove any 'active' styling for parent
            }
        });
    }

    function showHtmlContent(targetId, linkElement) {
        mainContentArea.classList.remove('showing-pdf');
        mainContentArea.classList.add('showing-html'); // Ensure main area shows HTML containers
        
        pdfViewerContainer.classList.add('hidden'); // Explicitly hide PDF viewer
        smsHtmlContentSections.forEach(section => section.classList.add('hidden')); // Hide all HTML sections first

        const targetSection = document.getElementById(targetId);
        if (targetSection) {
            targetSection.classList.remove('hidden');
        } else {
            const fallbackSection = document.getElementById(initialHtmlContentId);
            if (fallbackSection) fallbackSection.classList.remove('hidden'); // Fallback to IQA
        }

        clearAllActiveStates();
        let titleText = initialTitle;
        if (linkElement) {
            linkElement.classList.add('active', 'text-red-500', 'font-semibold');
            linkElement.classList.remove('text-gray-700');
            titleText = linkElement.textContent.trim();
        } else { // For initial load
            const defaultLink = document.querySelector(`#sms-main-nav-ul a[data-target="${initialHtmlContentId}"]`);
            if(defaultLink){
                defaultLink.classList.add('active', 'text-red-500', 'font-semibold');
                defaultLink.classList.remove('text-gray-700');
            }
        }
        smsCenterContentTitle.textContent = titleText;
    }

    function showPdfContent(pdfSrc, linkElement) {
        if (!pdfSrc || pdfSrc.trim() === "" || pdfSrc.toLowerCase().startsWith("url_")) {
            Swal.fire({
                icon: 'warning',
                title: 'ลิงก์ PDF ไม่ถูกต้อง',
                text: 'ยังไม่ได้กำหนดลิงก์สำหรับหลักฐานนี้ค่ะ หรือลิงก์อาจจะผิดพลาด',
                confirmButtonColor: '#ef4444'
            });
            pdfIframe.src = 'about:blank'; // Clear iframe
            // Potentially switch back to showing HTML content or a placeholder
            // showHtmlContent(initialHtmlContentId, document.querySelector(`#sms-main-nav-ul a[data-target="${initialHtmlContentId}"]`));
            return;
        }

        mainContentArea.classList.remove('showing-html');
        mainContentArea.classList.add('showing-pdf'); // Ensure main area shows PDF container
        
        smsHtmlContentSections.forEach(section => section.classList.add('hidden')); // Hide all HTML sections
        pdfViewerContainer.classList.remove('hidden'); // Show PDF viewer

        let finalPdfSrc = pdfSrc;
        if (pdfSrc.includes('drive.google.com') && !pdfSrc.includes('/preview')) {
            finalPdfSrc = pdfSrc.replace('/view', '/preview').replace(/\?usp=sharing$/, "").replace(/\/$/, "") + '/preview';
        }
        pdfIframe.src = finalPdfSrc;

        clearAllActiveStates();
        if (linkElement) {
            linkElement.classList.add('active-indicator');
            const parentMainLink = linkElement.closest('.sidebar-item')?.querySelector('.sms-sidebar-main-link');
            if (parentMainLink) {
                parentMainLink.classList.add('active'); // Add 'active' class to style the main category link
            }
            smsCenterContentTitle.textContent = linkElement.dataset.indicatorTitle || linkElement.textContent.trim();
        }
    }

    smsNavLinks.forEach(link => {
        if (link.getAttribute('href') !== 'index.html') {
            link.addEventListener('click', function (event) {
                event.preventDefault();
                const targetId = this.dataset.target;
                showHtmlContent(targetId, this);
            });
        }
    });

    indicatorLinks.forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault();
            const pdfSrc = this.dataset.pdfSrc;
            showPdfContent(pdfSrc, this);
        });
    });

    document.querySelectorAll('.sms-sidebar-main-link').forEach(mainLink => {
        mainLink.addEventListener('click', function(event) {
            event.preventDefault();
            // Optional: toggle sub-menu, or do nothing if they are always visible
            // const subMenu = this.nextElementSibling;
            // if (subMenu && subMenu.classList.contains('sub-indicator-menu')) {
            //     subMenu.classList.toggle('hidden');
            // }
        });
    });

    showHtmlContent(initialHtmlContentId, null); // Initial load with default HTML content

});
</script>
</body>
</html>

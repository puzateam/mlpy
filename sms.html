<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบประกันคุณภาพและผลงานเด่น - ร.ร.ชุมชนบ้านแม่หละป่าป๋วย</title>

    <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="sms-style.css">
</head>
<body class="bg-gray-100">

    <header>
        <div class="bg-gradient-to-r from-red-600 to-yellow-500 p-4">
            <div class="container mx-auto flex flex-col items-center">
                <div class="flex flex-col items-center mb-2">
                    <img src="https://i.postimg.cc/d3PbrGqC/logo-School.png" alt="โลโก้โรงเรียน" class="w-[80px] h-auto mb-2">
                    <div class="text-center">
                        <h1 class="text-white text-2xl md:text-3xl font-bold">โรงเรียนชุมชนบ้านแม่หละป่าป๋วย</h1>
                    </div>
                </div>
            </div>
        </div>
        <nav class="bg-white shadow-md sticky top-0 z-40">
            <div class="container mx-auto">
                <ul class="flex flex-wrap justify-center space-x-1 sm:space-x-2 md:space-x-3 lg:space-x-4 items-center py-2" id="sms-main-nav-ul">
                    <li><a href="#" data-target="iqaDocumentsSection" class="sms-nav-link menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">ประกันคุณภาพภายใน</a></li>
                    <li><a href="#" data-target="highlightsSectionContent" data-title="ผลงานเด่น" class="sms-nav-link menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">ผลงานเด่น</a></li>
                    <li><a href="index.html" class="menu-item px-2 sm:px-3 py-2 text-gray-700 hover:text-red-500 text-sm md:text-base">กลับเว็บหลัก</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <div class="container mx-auto p-4 main-container flex flex-col md:flex-row gap-6">
        <aside class="sidebar sidebar-sms w-full md:w-1/4">
             <div class="bg-white rounded-2xl shadow-md p-5 card">
                <h2 class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 my-4">มาตรฐานฯ ปฐมวัย</h2>
                <ul class="space-y-1" id="preschool-standards-menu">
                    {/* ... โค้ดส่วนมาตรฐานปฐมวัย เหมือนเดิม ... */}
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 1: คุณภาพของเด็ก</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.1" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="1" data-std-text="คุณภาพของเด็ก" data-indicator-no="1.1" data-indicator-detail="เด็กเจริญเติบโตสมวัย สุขภาพแข็งแรง และมีพัฒนาการด้านการเคลื่อนไหว">1.1 เด็กเจริญเติบโตสมวัยฯ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.2" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="1" data-std-text="คุณภาพของเด็ก" data-indicator-no="1.2" data-indicator-detail="เด็กมีพัฒนาการด้านสติปัญญา เรียนรู้และสร้างสรรค์">1.2 พัฒนาการด้านสติปัญญา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.3" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="1" data-std-text="คุณภาพของเด็ก" data-indicator-no="1.3" data-indicator-detail="เด็กมีพัฒนาการด้านภาษาและการสื่อสาร">1.3 พัฒนาการด้านภาษา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.4" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="1" data-std-text="คุณภาพของเด็ก" data-indicator-no="1.4" data-indicator-detail="เด็กมีพัฒนาการด้านอารมณ์และจิตใจ">1.4 พัฒนาการด้านอารมณ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S1_I1.5" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="1" data-std-text="คุณภาพของเด็ก" data-indicator-no="1.5" data-indicator-detail="เด็กมีพัฒนาการด้านสังคมและคุณธรรม">1.5 พัฒนาการด้านสังคม</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 2: กระบวนการบริหารและการจัดการ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.1" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.1" data-indicator-detail="วิสัยทัศน์ พันธกิจ และค่านิยมของสถานศึกษา">2.1 วิสัยทัศน์ พันธกิจ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.2" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.2" data-indicator-detail="กลยุทธ์และเป้าหมายของสถานศึกษา">2.2 กลยุทธ์และเป้าหมาย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.3" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.3" data-indicator-detail="ผู้บริหารมีภาวะผู้นำทางวิชาการและบริหารจัดการด้วยหลักธรรมาภิบาล">2.3 ผู้บริหารมีภาวะผู้นำ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.4" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.4" data-indicator-detail="การพัฒนาวิชาชีพผู้บริหาร ครู และบุคลากรทางการศึกษา">2.4 พัฒนาวิชาชีพบุคลากร</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.5" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.5" data-indicator-detail="การนิเทศและประเมินการปฏิบัติงานอย่างเป็นระบบ">2.5 นิเทศและประเมิน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.6" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.6" data-indicator-detail="การใช้สื่อและเทคโนโลยีสารสนเทศที่เอื้อต่อการเรียนรู้">2.6 การใช้สื่อและเทคโนโลยี</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.7" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.7" data-indicator-detail="การจัดสภาพแวดล้อมและแหล่งเรียนรู้ที่ปลอดภัย">2.7 สภาพแวดล้อมปลอดภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.8" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.8" data-indicator-detail="สวัสดิการและแนวทางการป้องกันโรคและภัยพิบัติ">2.8 สวัสดิการป้องกันภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.9" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.9" data-indicator-detail="กระบวนการเฝ้าระวังและคัดกรองเด็กที่ต้องการความช่วยเหลือ">2.9 เฝ้าระวังและคัดกรอง</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S2_I2.10" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.10" data-indicator-detail="การสร้างเครือข่ายและการมีส่วนร่วมของผู้ปกครองและชุมชน">2.10 เครือข่ายและการมีส่วนร่วม</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 3: การจัดประสบการณ์ฯ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.1" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="3" data-std-text="การจัดประสบการณ์ที่เน้นเด็กเป็นสำคัญ" data-indicator-no="3.1" data-indicator-detail="ครูมีการวางแผนการจัดประสบการณ์รายปี">3.1 ครูวางแผนการจัดประสบการณ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.2" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="3" data-std-text="การจัดประสบการณ์ที่เน้นเด็กเป็นสำคัญ" data-indicator-no="3.2" data-indicator-detail="ครูนำแผนการจัดประสบการณ์ไปใช้โดยใช้สื่อและแหล่งเรียนรู้ที่เอื้อต่อการเรียนรู้">3.2 ครูนำแผนไปใช้</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.3" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="3" data-std-text="การจัดประสบการณ์ที่เน้นเด็กเป็นสำคัญ" data-indicator-no="3.3" data-indicator-detail="มีการตรวจสอบและประเมินเด็กอย่างเป็นระบบ">3.3 ตรวจสอบและประเมินเด็ก</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.4" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="3" data-std-text="การจัดประสบการณ์ที่เน้นเด็กเป็นสำคัญ" data-indicator-no="3.4" data-indicator-detail="มีการนำผลการประเมินมาพัฒนาเด็ก">3.4 นำผลประเมินมาพัฒนา</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_PRESCHOOL_S3_I3.5" data-level="มาตรฐานการศึกษาปฐมวัย" data-std-no="3" data-std-text="การจัดประสบการณ์ที่เน้นเด็กเป็นสำคัญ" data-indicator-no="3.5" data-indicator-detail="มีการแลกเปลี่ยนเรียนรู้และให้ข้อมูลป้อนกลับเพื่อพัฒนาการจัดประสบการณ์">3.5 แลกเปลี่ยนเรียนรู้</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </aside>

<div id="iqaDocumentsSection" class="main-content-panel">
    <div class="iqa-tab-container">
        <!-- กลุ่มที่ 1: แผนพัฒนาคุณภาพการศึกษา (ไม่มี sub-menu) -->
        <div class="iqa-tab-item-wrapper">
            <button data-pdf-src="https://drive.google.com/file/d/1n3XtVetBdlzZqaDE8Hlm5xs9GGQg0sSH/preview" class="iqa-sub-nav-item">แผนพัฒนาคุณภาพการศึกษา</button>
        </div>

        <!-- กลุ่มที่ 2: รายงานการประเมินตนเอง (SAR) และ sub-menu ของมัน -->
        <div class="iqa-tab-item-wrapper has-nested-menu-container">
            <button data-submenu-target="sar-submenu" class="iqa-sub-nav-item has-submenu">รายงานการประเมินตนเอง (SAR)</button>
            <div id="sar-submenu" class="iqa-nested-submenu">
                <button data-pdf-src="URL_SAR_2565_PDF" class="iqa-nested-submenu-item">รายงานการประเมินตนเอง 2565</button>
                <button data-pdf-src="URL_SAR_2566_PDF" class="iqa-nested-submenu-item">รายงานการประเมินตนเอง 2566</button>
                <button data-pdf-src="URL_SAR_2567_PDF" class="iqa-nested-submenu-item">รายงานการประเมินตนเอง 2567</button>
            </div>
        </div>

        <!-- กลุ่มที่ 3: แผนปฏิบัติการประจำปี และ sub-menu ของมัน -->
        <div class="iqa-tab-item-wrapper has-nested-menu-container">
            <button data-submenu-target="annual-plan-submenu" class="iqa-sub-nav-item has-submenu">แผนปฏิบัติการประจำปี</button>
            <div id="annual-plan-submenu" class="iqa-nested-submenu">
                <button data-pdf-src="URL_ANNUAL_PLAN_2566_PDF" class="iqa-nested-submenu-item">แผนปฏิบัติการประจำปี 2566</button>
                <button data-pdf-src="URL_ANNUAL_PLAN_2567_PDF" class="iqa-nested-submenu-item">แผนปฏิบัติการประจำปี 2567</button>
                <button data-pdf-src="URL_ANNUAL_PLAN_2568_PDF" class="iqa-nested-submenu-item">แผนปฏิบัติการประจำปี 2568</button>
            </div>
        </div>
    </div> <!-- ปิด iqa-tab-container -->

    <div id="commonPdfDisplayArea">
        <div id="pdf-viewer-container">
            <iframe id="pdf-iframe" class="pdf-embed-container-sms" frameborder="0" allowfullscreen></iframe>
        </div>
        <div id="no-pdf-message-container">
            <p id="no-pdf-message-text"></p>
        </div>
    </div>
</div>

                <div id="highlightsSectionContent" class="main-content-panel sms-html-content-section hidden">
                    <h2 class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 mb-6">ผลงานเด่นของสถานศึกษา</h2>
                </div>

                <div id="indicatorDisplayArea" class="main-content-panel hidden">
                    <h2 id="sms-center-content-title" class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 mb-6 hidden"></h2>
                    {/* This panel will re-use the #commonPdfDisplayArea */}
                </div>
            </div>
        </main>

        <aside class="sidebar sidebar-sms w-full md:w-1/4">
             <div class="bg-white rounded-2xl shadow-md p-5 card">
                <h2 class="text-xl font-bold text-red-600 border-b-2 border-yellow-400 pb-2 my-4">มาตรฐานฯ ขั้นพื้นฐาน</h2>
                <ul class="space-y-1" id="basiced-standards-menu">
                    {/* ... โค้ดส่วนมาตรฐานขั้นพื้นฐาน เหมือนเดิม ... */}
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 1: คุณภาพของผู้เรียน</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.1" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="1" data-std-text="คุณภาพของผู้เรียน" data-indicator-no="1.1" data-indicator-detail="ผู้เรียนมีสมรรถนะตามหลักสูตรสถานศึกษา">1.1 ผู้เรียนมีสมรรถนะ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.2" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="1" data-std-text="คุณภาพของผู้เรียน" data-indicator-no="1.2" data-indicator-detail="ผู้เรียนมีคุณลักษณะที่พึงประสงค์ตามหลักสูตรสถานศึกษา">1.2 คุณลักษณะที่พึงประสงค์</a></li>
                             <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S1_I1.3" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="1" data-std-text="คุณภาพของผู้เรียน" data-indicator-no="1.3" data-indicator-detail="ผู้เรียนสามารถนำตนเองในการเรียนรู้">1.3 นำตนเองในการเรียนรู้</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 2: กระบวนการบริหารและการจัดการ</a>
                        <ul class="sub-indicator-menu">
                             <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.1" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.1" data-indicator-detail="วิสัยทัศน์ พันธกิจ และค่านิยมของสถานศึกษา">2.1 วิสัยทัศน์ พันธกิจ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.2" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.2" data-indicator-detail="นโยบาย ทิศทาง กลยุทธ์ และแผนงานสอดคล้องกับวิสัยทัศน์และพันธกิจ">2.2 นโยบาย ทิศทาง กลยุทธ์</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.3" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.3" data-indicator-detail="ผู้บริหารมีภาวะผู้นำทางวิชาการและบริหารจัดการด้วยหลักธรรมาภิบาล">2.3 ผู้บริหารมีภาวะผู้นำ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.4" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.4" data-indicator-detail="การพัฒนาครูและบุคลากรทางการศึกษา">2.4 พัฒนาครูและบุคลากร</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.5" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.5" data-indicator-detail="กระบวนการนิเทศการปฏิบัติงานของครูและบุคลากรทางการศึกษา">2.5 นิเทศการปฏิบัติงาน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.6" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.6" data-indicator-detail="การใช้สื่อ อุปกรณ์ และเทคโนโลยีเพื่อสนับสนุนการจัดการศึกษา">2.6 การใช้สื่อ อุปกรณ์ เทคโนโลยี</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.7" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.7" data-indicator-detail="การจัดสภาพแวดล้อม อาคารสถานที่ที่ปลอดภัยและถูกสุขลักษณะ">2.7 สภาพแวดล้อมปลอดภัย</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.8" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.8" data-indicator-detail="สวัสดิการ สวัสดิภาพ และแนวทางการป้องกันโรคและภัยพิบัติ">2.8 สวัสดิการ สวัสดิภาพ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.9" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.9" data-indicator-detail="ระบบและกระบวนการช่วยเหลือผู้เรียน">2.9 ระบบช่วยเหลือผู้เรียน</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S2_I2.10" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="2" data-std-text="กระบวนการบริหารและการจัดการ" data-indicator-no="2.10" data-indicator-detail="การเสริมสร้างเครือข่ายผู้ปกครอง องค์กร และชุมชน">2.10 เสริมสร้างเครือข่าย</a></li>
                        </ul>
                    </li>
                    <li class="sidebar-item">
                        <a href="#" class="sms-sidebar-main-link">มาตรฐานที่ 3: กระบวนการจัดการเรียนการสอนฯ</a>
                        <ul class="sub-indicator-menu">
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.1" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="3" data-std-text="กระบวนการจัดการเรียนการสอนที่เน้นผู้เรียนเป็นสำคัญ" data-indicator-no="3.1" data-indicator-detail="การออกแบบหลักสูตรและแผนการจัดการเรียนรู้ที่เสริมสร้างสมรรถนะและคุณลักษณะที่พึงประสงค์">3.1 ออกแบบหลักสูตรและแผนฯ</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.2" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="3" data-std-text="กระบวนการจัดการเรียนการสอนที่เน้นผู้เรียนเป็นสำคัญ" data-indicator-no="3.2" data-indicator-detail="การจัดกิจกรรมการเรียนรู้ที่เสริมสร้างสมรรถนะและคุณลักษณะที่พึงประสงค์">3.2 จัดกิจกรรมการเรียนรู้</a></li>
                            <li><a href="#" class="sms-indicator-link" data-pdf-src="URL_BASICED_S3_I3.3" data-level="มาตรฐานการศึกษาขั้นพื้นฐาน" data-std-no="3" data-std-text="กระบวนการจัดการเรียนการสอนที่เน้นผู้เรียนเป็นสำคัญ" data-indicator-no="3.3" data-indicator-detail="ครูวัดและประเมินผลการเรียนรู้ของผู้เรียนอย่างเป็นระบบและต่อเนื่อง">3.3 ครูวัดและประเมินผล</a></li>
                        </ul>
                    </li>
                </ul>
            </div>
        </aside>
    </div>

    <footer class="bg-gradient-to-r from-red-600 to-yellow-500 text-white py-4 mt-8 rounded-t-3xl">
        <div class="container mx-auto px-4">
            <div class="flex flex-col items-center text-center">
                <p class="footer-text">โรงเรียนชุมชนบ้านแม่หละป่าป๋วย</p>
                <p class="footer-text">ตำบลสรอย อำเภอวังชิ้น จังหวัดแพร่</p>
                <p class="footer-text">สำนักงานเขตพื้นที่การศึกษาประถมศึกษาแพร่เขต 2</p>
            </div>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const mainNavUl = document.getElementById('sms-main-nav-ul');
    const mainNavLinks = mainNavUl.querySelectorAll('a.sms-nav-link.menu-item');

    const iqaDocumentsSection = document.getElementById('iqaDocumentsSection');
    const iqaSubNavContainer = iqaDocumentsSection.querySelector('.iqa-sub-nav'); // Container ของปุ่มหลัก
    const iqaSubNavItems = iqaSubNavContainer.querySelectorAll('.iqa-sub-nav-item:not(.has-submenu)'); // ปุ่มที่แสดง PDF โดยตรง
    const iqaSubNavParentItems = iqaSubNavContainer.querySelectorAll('.iqa-sub-nav-item.has-submenu'); // ปุ่มที่เป็น parent ของ sub-menu
    const allNestedSubmenuItems = iqaDocumentsSection.querySelectorAll('.iqa-nested-submenu-item'); // ปุ่มใน sub-menu ย่อยทั้งหมด
    const allNestedSubmenus = iqaDocumentsSection.querySelectorAll('.iqa-nested-submenu'); // div ของ sub-menu ย่อยทั้งหมด


    const indicatorLinks = document.querySelectorAll('.sms-indicator-link');

    const mainContentPanels = document.querySelectorAll('.main-content-panel');
    const highlightsSection = document.getElementById('highlightsSectionContent');
    const indicatorDisplayArea = document.getElementById('indicatorDisplayArea');

    const commonPdfDisplayArea = document.getElementById('commonPdfDisplayArea');
    const pdfViewerContainer = document.getElementById('pdf-viewer-container');
    const pdfIframe = document.getElementById('pdf-iframe');
    const noPdfMessageContainer = document.getElementById('no-pdf-message-container');
    const noPdfMessageText = document.getElementById('no-pdf-message-text');

    const smsCenterContentTitleElement = document.getElementById('sms-center-content-title');

    const defaultIqaPdfUrl = "https://drive.google.com/file/d/1n3XtVetBdlzZqaDE8Hlm5xs9GGQg0sSH/preview";

    function clearAllActiveNavStates() {
        mainNavLinks.forEach(link => link.classList.remove('active', 'text-red-500', 'font-semibold'));
        iqaSubNavItems.forEach(item => item.classList.remove('active'));
        iqaSubNavParentItems.forEach(item => item.classList.remove('active')); // ลบ active จาก parent ด้วย
        allNestedSubmenuItems.forEach(item => item.classList.remove('active'));
        indicatorLinks.forEach(link => link.classList.remove('active-indicator'));
        document.querySelectorAll('.sms-sidebar-main-link.active-parent').forEach(link => link.classList.remove('active-parent'));
    }

    function hideAllNestedSubmenus() {
        allNestedSubmenus.forEach(submenu => submenu.classList.remove('active'));
    }

    function showMainContentPanel(panelIdToShow) {
        mainContentPanels.forEach(panel => {
            panel.classList.toggle('hidden', panel.id !== panelIdToShow);
        });
        commonPdfDisplayArea.classList.toggle('hidden', !(panelIdToShow === 'iqaDocumentsSection' || panelIdToShow === 'indicatorDisplayArea'));
        smsCenterContentTitleElement.classList.toggle('hidden', panelIdToShow !== 'indicatorDisplayArea');
        if (panelIdToShow !== 'indicatorDisplayArea') {
            smsCenterContentTitleElement.innerHTML = '';
        }
    }

    function displayPdfInCommonArea(pdfSrc, tabNameForNoPdf) {
        if (pdfSrc && pdfSrc.trim() !== "" && !pdfSrc.toLowerCase().includes("url_") && !pdfSrc.toLowerCase().includes("your_")) {
            pdfViewerContainer.style.display = 'block';
            noPdfMessageContainer.style.display = 'none';
            let finalPdfSrc = pdfSrc;
            if (pdfSrc.includes('drive.google.com') && pdfSrc.includes('/file/d/') && !pdfSrc.includes('/preview')) {
                finalPdfSrc = pdfSrc.replace('/view', '/preview').replace(/\?usp=sharing$/, "").replace(/\/$/, "") + '/preview';
            }
            pdfIframe.src = finalPdfSrc;
        } else {
            pdfViewerContainer.style.display = 'none';
            noPdfMessageContainer.style.display = 'block';
            noPdfMessageText.textContent = `ยังไม่มีข้อมูลไฟล์ PDF สำหรับ: ${tabNameForNoPdf}`;
            pdfIframe.src = 'about:blank';
        }
    }

    function setIndicatorTitle(htmlContent) {
        smsCenterContentTitleElement.innerHTML = htmlContent;
        smsCenterContentTitleElement.classList.remove('hidden');
    }

    // --- Event Listeners ---

    mainNavLinks.forEach(link => {
        link.addEventListener('click', function(event) {
            event.preventDefault();
            const targetPanelId = this.dataset.target;

            clearAllActiveNavStates();
            hideAllNestedSubmenus(); // ซ่อน sub-menu ย่อยทั้งหมดเมื่อเปลี่ยน main nav
            this.classList.add('active', 'text-red-500', 'font-semibold');
            showMainContentPanel(targetPanelId);

            if (targetPanelId === 'iqaDocumentsSection') {
                const firstDirectPdfItem = iqaSubNavContainer.querySelector('.iqa-sub-nav-item:not(.has-submenu)');
                if (firstDirectPdfItem) {
                    firstDirectPdfItem.classList.add('active');
                    displayPdfInCommonArea(firstDirectPdfItem.dataset.pdfSrc || defaultIqaPdfUrl, firstDirectPdfItem.textContent.trim());
                } else {
                    // ถ้าไม่มีปุ่ม PDF โดยตรง (เช่น เหลือแต่ parent) อาจจะ default ไปที่ sub-menu แรก
                     displayPdfInCommonArea("", "กรุณาเลือกรายการ"); // หรือแสดงข้อความเริ่มต้น
                }
            }
        });
    });

    // Event listener สำหรับปุ่มที่แสดง PDF โดยตรง (ไม่ใช่ parent ของ sub-menu)
    iqaSubNavItems.forEach(item => {
        item.addEventListener('click', function() {
            clearAllActiveNavStates(); // ล้าง active ทั้งหมดก่อน
            hideAllNestedSubmenus(); // ซ่อน sub-menu ย่อยทั้งหมด
            this.classList.add('active'); // active ปุ่มนี้
            const pdfSrc = this.dataset.pdfSrc;
            displayPdfInCommonArea(pdfSrc, this.textContent.trim());
        });
    });

    // Event listener สำหรับปุ่มที่เป็น Parent ของ Sub-menu (SAR, Annual Plan)
    iqaSubNavParentItems.forEach(parentItem => {
        parentItem.addEventListener('click', function() {
            const targetSubmenuId = this.dataset.submenuTarget;
            const targetSubmenu = document.getElementById(targetSubmenuId);

            // ล้าง active ของปุ่มหลักและปุ่มย่อยอื่นๆ ทั้งหมด *ยกเว้น* ปุ่ม parent ที่กำลังคลิก
            iqaSubNavItems.forEach(i => i.classList.remove('active'));
            iqaSubNavParentItems.forEach(p => {
                if (p !== this) p.classList.remove('active');
            });
            allNestedSubmenuItems.forEach(n => n.classList.remove('active'));


            // Toggle active state ของ parent ที่คลิก
            this.classList.toggle('active');

            // Toggle active state ของ sub-menu ที่เกี่ยวข้อง และซ่อน sub-menu อื่นๆ
            allNestedSubmenus.forEach(submenu => {
                if (submenu.id === targetSubmenuId) {
                    submenu.classList.toggle('active', this.classList.contains('active')); // ให้ sub-menu active ตาม parent
                } else {
                    submenu.classList.remove('active'); // ซ่อน sub-menu อื่น
                }
            });

            // ถ้า sub-menu ถูกเปิด, และยังไม่มี PDF แสดง, อาจจะแสดงข้อความ "กรุณาเลือกรายการย่อย"
            if (targetSubmenu && targetSubmenu.classList.contains('active')) {
                const firstNestedItem = targetSubmenu.querySelector('.iqa-nested-submenu-item');
                if (firstNestedItem) {
                    // อาจจะไม่ต้องคลิกอัตโนมัติ ให้ผู้ใช้เลือกเอง หรือ
                    // firstNestedItem.click(); // ถ้าต้องการให้คลิกรายการแรกใน sub-menu อัตโนมัติ
                    // หรือแสดง PDF ของรายการแรก
                    // displayPdfInCommonArea(firstNestedItem.dataset.pdfSrc, firstNestedItem.textContent.trim());
                    // firstNestedItem.classList.add('active');
                    // หรือแค่แสดงข้อความ default
                    displayPdfInCommonArea("", "กรุณาเลือกรายการจากเมนูย่อย");
                }
            } else if (!this.classList.contains('active')) {
                // ถ้า parent ถูกปิด และไม่มีปุ่มหลักอื่น active, แสดง default PDF หรือข้อความ
                const anyOtherActiveMainButton = iqaSubNavContainer.querySelector('.iqa-sub-nav-item.active:not(.has-submenu)');
                if (!anyOtherActiveMainButton) {
                    const firstDirectPdfItem = iqaSubNavContainer.querySelector('.iqa-sub-nav-item:not(.has-submenu)');
                    if (firstDirectPdfItem) {
                         firstDirectPdfItem.classList.add('active'); // ทำให้ปุ่มแรก active
                         displayPdfInCommonArea(firstDirectPdfItem.dataset.pdfSrc || defaultIqaPdfUrl, firstDirectPdfItem.textContent.trim());
                    } else {
                        displayPdfInCommonArea("", "กรุณาเลือกรายการ");
                    }
                }
            }
        });
    });

    // Event listener สำหรับปุ่มใน Sub-menu ย่อย (SAR 2565, etc.)
    allNestedSubmenuItems.forEach(nestedItem => {
        nestedItem.addEventListener('click', function() {
            // ล้าง active ของปุ่มย่อยอื่นๆ ใน sub-menu เดียวกันและ sub-menu อื่น
            allNestedSubmenuItems.forEach(n => n.classList.remove('active'));
            // ล้าง active ของปุ่มหลักที่ไม่ใช่ parent ของ sub-menu นี้
            iqaSubNavItems.forEach(i => i.classList.remove('active'));

            this.classList.add('active'); // active ปุ่มย่อยที่คลิก

            // ทำให้ parent ของ sub-menu นี้ active ด้วย
            const parentSubmenuDiv = this.closest('.iqa-nested-submenu');
            if (parentSubmenuDiv) {
                const parentButton = iqaSubNavContainer.querySelector(`.has-submenu[data-submenu-target="${parentSubmenuDiv.id}"]`);
                if (parentButton) {
                    iqaSubNavParentItems.forEach(p => p.classList.remove('active')); // clear other parents
                    parentButton.classList.add('active');
                }
            }

            const pdfSrc = this.dataset.pdfSrc;
            displayPdfInCommonArea(pdfSrc, this.textContent.trim());
        });
    });


    indicatorLinks.forEach(link => {
        link.addEventListener('click', function (event) {
            event.preventDefault();
            clearAllActiveNavStates();
            hideAllNestedSubmenus();
            showMainContentPanel('indicatorDisplayArea');

            this.classList.add('active-indicator');
            const parentMainLink = this.closest('.sidebar-item')?.querySelector('.sms-sidebar-main-link');
            if (parentMainLink) {
                parentMainLink.classList.add('active-parent');
            }

            const pdfSrc = this.dataset.pdfSrc;
            const level = this.dataset.level || "";
            const stdNo = this.dataset.stdNo || "";
            const indicatorNo = this.dataset.indicatorNo || "";
            const indicatorDetail = this.dataset.indicatorDetail || "";

            const titleLine1 = `${level} มาตรฐานที่ ${stdNo}`;
            const titleLine2 = `ตัวชี้วัดที่ ${indicatorNo} :: ${indicatorDetail}`;
            setIndicatorTitle(`<span class="title-line-1">${titleLine1}</span><span class="title-line-2">${titleLine2}</span>`);

            displayPdfInCommonArea(pdfSrc, `ตัวชี้วัดที่ ${indicatorNo} :: ${indicatorDetail}`);
        });
    });

    document.querySelectorAll('.sms-sidebar-main-link').forEach(mainLink => {
        mainLink.addEventListener('click', function(event) {
            event.preventDefault();
        });
    });

    function initializePage() {
        const iqaNavLink = mainNavUl.querySelector('a[data-target="iqaDocumentsSection"]');
        if (iqaNavLink) {
            iqaNavLink.click();
        }
    }
    initializePage();
});
</script>
</body>
</html>
